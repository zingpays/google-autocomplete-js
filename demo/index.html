<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Google AutoComplete JS - CDN Demo</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      max-width: 800px;
      margin: 0 auto;
      padding: 40px 20px;
      background-color: #f5f5f5;
    }

    .demo-container {
      background: white;
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      margin-bottom: 30px;
    }

    h1 {
      color: #333;
      text-align: center;
      margin-bottom: 40px;
    }

    .form-group {
      margin-bottom: 20px;
    }

    label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: #333;
    }

    .output {
      background-color: #f8f9fa;
      border: 1px solid #e9ecef;
      border-radius: 4px;
      padding: 15px;
      margin-top: 15px;
      font-family: monospace;
      white-space: pre-wrap;
      min-height: 40px;
    }

    .note {
      background-color: #e7f3ff;
      border-left: 4px solid #2196F3;
      padding: 15px;
      margin: 20px 0;
      border-radius: 4px;
    }

    .warning {
      background-color: #fff3cd;
      border-left: 4px solid #ffc107;
      padding: 15px;
      margin: 20px 0;
      border-radius: 4px;
    }

    /* è‡ªå®šä¹‰æ ·å¼æµ‹è¯• */
    .custom-input {
      border: 3px solid #007bff !important;
      border-radius: 25px !important;
      padding: 15px 20px !important;
      font-size: 18px !important;
      background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%) !important;
      transition: all 0.3s ease !important;
    }

    .custom-input:focus {
      border-color: #28a745 !important;
      box-shadow: 0 0 20px rgba(40, 167, 69, 0.3) !important;
      background: white !important;
      transform: scale(1.02) !important;
    }

    .custom-results {
      border: 2px solid #28a745 !important;
      border-radius: 15px !important;
      box-shadow: 0 8px 32px rgba(40, 167, 69, 0.2) !important;
      background: linear-gradient(135deg, #ffffff 0%, #f8fff9 100%) !important;
    }

    .custom-wrapper {
      position: relative;
      width: 100%;
      max-width: 600px;
      margin: 0 auto;
    }

    /* åŠ¨æ€æ ·å¼å˜åŒ– */
    .success-input {
      border-color: #28a745 !important;
      background: linear-gradient(135deg, #f8fff9 0%, #d4edda 100%) !important;
    }

    .success-results {
      border-color: #28a745 !important;
      box-shadow: 0 8px 32px rgba(40, 167, 69, 0.3) !important;
    }

    /* æ§åˆ¶æŒ‰é’®æ ·å¼ */
    .control-buttons {
      display: flex;
      gap: 10px;
      margin: 20px 0;
      flex-wrap: wrap;
    }

    .control-btn {
      padding: 8px 16px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
      transition: all 0.2s ease;
    }

    .control-btn.primary {
      background-color: #007bff;
      color: white;
    }

    .control-btn.primary:hover {
      background-color: #0056b3;
    }

    .control-btn.success {
      background-color: #28a745;
      color: white;
    }

    .control-btn.success:hover {
      background-color: #1e7e34;
    }

    .control-btn.warning {
      background-color: #ffc107;
      color: #212529;
    }

    .control-btn.warning:hover {
      background-color: #e0a800;
    }

    .control-btn.info {
      background-color: #17a2b8;
      color: white;
    }

    .control-btn.info:hover {
      background-color: #138496;
    }
  </style>
</head>

<body>
  <h1>Google AutoComplete JS - CDN Demo</h1>

  <div class="demo-container">
    <div class="form-group">
      <label for="autocomplete-input">Search Location:</label>
      <div id="autocomplete-container"></div>
    </div>

    <div class="control-buttons">
      <button class="control-btn primary" onclick="applyCustomStyles()">åº”ç”¨è‡ªå®šä¹‰æ ·å¼</button>
      <button class="control-btn success" onclick="applySuccessStyles()">åº”ç”¨æˆåŠŸæ ·å¼</button>
      <button class="control-btn warning" onclick="applyWarningStyles()">åº”ç”¨è­¦å‘Šæ ·å¼</button>
      <button class="control-btn info" onclick="resetStyles()">é‡ç½®æ ·å¼</button>
      <button class="control-btn primary" onclick="updateInputStyle()">æ›´æ–°è¾“å…¥æ¡†æ ·å¼</button>
      <button class="control-btn success" onclick="updateResultsStyle()">æ›´æ–°ç»“æœæ¡†æ ·å¼</button>
      <button class="control-btn warning" onclick="toggleRemoteMode()">åˆ‡æ¢è¿œç¨‹æ¨¡å¼</button>
      <button class="control-btn info" onclick="showCurrentMode()">æ˜¾ç¤ºå½“å‰æ¨¡å¼</button>
    </div>

    <div class="output" id="output"></div>
    
    <div class="note">
      <h3>ğŸ¨ æ–°å¢åŠŸèƒ½è¯´æ˜</h3>
      
      <h4>ğŸ“¡ è¿œç¨‹æœåŠ¡æ”¯æŒ</h4>
      <p><strong>æ–°å¢å‚æ•°ï¼š</strong></p>
      <ul>
        <li><code>remote</code>: æ˜¯å¦ä½¿ç”¨è¿œç¨‹æœåŠ¡ï¼Œé»˜è®¤ä¸ºfalseï¼ˆä½¿ç”¨Google Maps APIï¼‰</li>
        <li><code>remoteUrl</code>: è¿œç¨‹æœåŠ¡åœ°å€ï¼Œé»˜è®¤ä¸º'http://localhost:3000/places/'</li>
      </ul>
      
      <p><strong>ä½¿ç”¨æ–¹å¼ï¼š</strong></p>
      <ul>
        <li>è®¾ç½® <code>remote: true</code> ä½¿ç”¨è‡ªå·±çš„è¿œç¨‹æœåŠ¡</li>
        <li>è®¾ç½® <code>remote: false</code> æˆ–çœç•¥è¯¥å‚æ•°ä½¿ç”¨Google Maps API</li>
        <li>è¿œç¨‹æœåŠ¡éœ€è¦æä¾› <code>/autocomplete</code> å’Œ <code>/details</code> æ¥å£</li>
        <li>å·²é’ˆå¯¹ <code>legend-places</code> æœåŠ¡è¿›è¡Œä¼˜åŒ–ï¼Œæ”¯æŒå…¶å“åº”æ‹¦æˆªå™¨æ ¼å¼</li>
      </ul>
      
      <h4>ğŸ¨ æ ·å¼é…ç½®åŠŸèƒ½</h4>
      <p><strong>æ„é€ å‡½æ•°æ ·å¼é€‰é¡¹ï¼š</strong></p>
      <ul>
        <li><code>inputClass</code>: è‡ªå®šä¹‰è¾“å…¥æ¡† CSS ç±»å</li>
        <li><code>inputStyle</code>: è‡ªå®šä¹‰è¾“å…¥æ¡†å†…è”æ ·å¼</li>
        <li><code>resultsClass</code>: è‡ªå®šä¹‰ç»“æœå®¹å™¨ CSS ç±»å</li>
        <li><code>resultsStyle</code>: è‡ªå®šä¹‰ç»“æœå®¹å™¨å†…è”æ ·å¼</li>
        <li><code>wrapperClass</code>: è‡ªå®šä¹‰åŒ…è£…å™¨ CSS ç±»å</li>
      </ul>
      
      <p><strong>åŠ¨æ€æ ·å¼æ›´æ–°æ–¹æ³•ï¼š</strong></p>
      <ul>
        <li><code>updateInputStyle(style)</code>: æ›´æ–°è¾“å…¥æ¡†æ ·å¼</li>
        <li><code>updateResultsStyle(style)</code>: æ›´æ–°ç»“æœå®¹å™¨æ ·å¼</li>
        <li><code>updateInputClass(className)</code>: æ›´æ–°è¾“å…¥æ¡†ç±»å</li>
        <li><code>updateResultsClass(className)</code>: æ›´æ–°ç»“æœå®¹å™¨ç±»å</li>
      </ul>
      
      <p><strong>æµ‹è¯•è¯´æ˜ï¼š</strong> ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®å¯ä»¥æµ‹è¯•å„ç§åŠŸèƒ½ï¼ŒåŒ…æ‹¬æ ·å¼é…ç½®ã€è¿œç¨‹æ¨¡å¼åˆ‡æ¢ç­‰ã€‚</p>
    </div>
  </div>


  <!-- Include our built component (includes Google Maps API Loader) -->
  <script src="./google-autocomplete.min.js"></script>

  <script>
    // Initialize the component using the CDN approach
    const autocomplete = googleAutoComplete(document.getElementById('autocomplete-container'), {
      apiKey: 'AIzaSyDbmQ8MHG9jV6wwg3z_n8Tjel5eYRI0yJg', // Replace with your actual API key
      placeholder: 'Enter any location...',
      debounceDelay: 500,
      
      // æ–°å¢remoteå‚æ•°é…ç½®
      remote: false, // è®¾ç½®ä¸ºtrueä½¿ç”¨è¿œç¨‹æœåŠ¡ï¼Œfalseä½¿ç”¨Google Maps API
      remoteUrl: 'https://feplaces.legendtrading.com/places/', // è¿œç¨‹æœåŠ¡åœ°å€
      
      // æµ‹è¯•æ–°çš„æ ·å¼é…ç½®é€‰é¡¹
      inputClass: 'custom-input',
      inputStyle: {
        'font-weight': '500',
        'letter-spacing': '0.5px'
      },
      resultsClass: 'custom-results',
      resultsStyle: {
        'z-index': '9999',
        'max-height': '350px'
      },
      wrapperClass: 'custom-wrapper',
      
      onSelect: function (place) {
        document.getElementById('output').textContent = `Selected: ${place.formattedAddress || place.displayName || place.query}`;
        console.log('Full place object:', place);
      },
      onInput: function (value) {
        console.log('onInput', value);
        if (value.length > 2) {
          document.getElementById('output').textContent = `Typing: "${value}"`;
        } else if (value.length === 0) {
          document.getElementById('output').textContent = 'Ready... (Enter a location to see autocomplete suggestions)';
        }
      },
      onFocus: function () {
        console.log('Input focused');
      },
      onBlur: function () {
        console.log('Input blurred');
      }
    });

    // Example of programmatic control
    setTimeout(() => {
      console.log('Component initialized:', autocomplete);
      console.log('Available methods:', Object.getOwnPropertyNames(Object.getPrototypeOf(autocomplete)));
      console.log('Available style methods:', [
        'updateInputStyle',
        'updateResultsStyle', 
        'updateInputClass',
        'updateResultsClass'
      ]);
    }, 1000);

    // æµ‹è¯•å‡½æ•°ï¼šåº”ç”¨è‡ªå®šä¹‰æ ·å¼
    function applyCustomStyles() {
      autocomplete.updateInputClass('custom-input');
      autocomplete.updateResultsClass('custom-results');
      autocomplete.updateInputStyle({
        'border-color': '#007bff',
        'background': 'linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)'
      });
      autocomplete.updateResultsStyle({
        'border-color': '#28a745',
        'box-shadow': '0 8px 32px rgba(40, 167, 69, 0.2)'
      });
      document.getElementById('output').textContent = 'âœ… å·²åº”ç”¨è‡ªå®šä¹‰æ ·å¼';
    }

    // æµ‹è¯•å‡½æ•°ï¼šåº”ç”¨æˆåŠŸæ ·å¼
    function applySuccessStyles() {
      autocomplete.updateInputClass('custom-input success-input');
      autocomplete.updateResultsClass('custom-results success-results');
      autocomplete.updateInputStyle({
        'border-color': '#28a745',
        'background': 'linear-gradient(135deg, #f8fff9 0%, #d4edda 100%)'
      });
      autocomplete.updateResultsStyle({
        'border-color': '#28a745',
        'box-shadow': '0 8px 32px rgba(40, 167, 69, 0.3)'
      });
      document.getElementById('output').textContent = 'âœ… å·²åº”ç”¨æˆåŠŸæ ·å¼';
    }

    // æµ‹è¯•å‡½æ•°ï¼šåº”ç”¨è­¦å‘Šæ ·å¼
    function applyWarningStyles() {
      autocomplete.updateInputClass('custom-input');
      autocomplete.updateResultsClass('custom-results');
      autocomplete.updateInputStyle({
        'border-color': '#ffc107',
        'background': 'linear-gradient(135deg, #fffbf0 0%, #fef3cd 100%)'
      });
      autocomplete.updateResultsStyle({
        'border-color': '#ffc107',
        'box-shadow': '0 8px 32px rgba(255, 193, 7, 0.3)'
      });
      document.getElementById('output').textContent = 'âš ï¸ å·²åº”ç”¨è­¦å‘Šæ ·å¼';
    }

    // æµ‹è¯•å‡½æ•°ï¼šé‡ç½®æ ·å¼
    function resetStyles() {
      autocomplete.updateInputClass('');
      autocomplete.updateResultsClass('');
      autocomplete.updateInputStyle({});
      autocomplete.updateResultsStyle({});
      document.getElementById('output').textContent = 'ğŸ”„ æ ·å¼å·²é‡ç½®';
    }

    // æµ‹è¯•å‡½æ•°ï¼šæ›´æ–°è¾“å…¥æ¡†æ ·å¼
    function updateInputStyle() {
      const randomColors = ['#007bff', '#28a745', '#ffc107', '#dc3545', '#6f42c1'];
      const randomColor = randomColors[Math.floor(Math.random() * randomColors.length)];
      
      autocomplete.updateInputStyle({
        'border-color': randomColor,
        'box-shadow': `0 0 20px ${randomColor}40`
      });
      
      document.getElementById('output').textContent = `ğŸ¨ è¾“å…¥æ¡†æ ·å¼å·²æ›´æ–°ï¼Œè¾¹æ¡†é¢œè‰²: ${randomColor}`;
    }

    // æµ‹è¯•å‡½æ•°ï¼šæ›´æ–°ç»“æœæ¡†æ ·å¼
    function updateResultsStyle() {
      const randomColors = ['#28a745', '#007bff', '#ffc107', '#dc3545', '#6f42c1'];
      const randomColor = randomColors[Math.floor(Math.random() * randomColors.length)];
      
      autocomplete.updateResultsStyle({
        'border-color': randomColor,
        'box-shadow': `0 8px 32px ${randomColor}30`
      });
      
      document.getElementById('output').textContent = `ğŸ¨ ç»“æœæ¡†æ ·å¼å·²æ›´æ–°ï¼Œè¾¹æ¡†é¢œè‰²: ${randomColor}`;
    }

    // æµ‹è¯•å‡½æ•°ï¼šåˆ‡æ¢è¿œç¨‹æ¨¡å¼
    function toggleRemoteMode() {
      // æ³¨æ„ï¼šè¿™ä¸ªåŠŸèƒ½éœ€è¦é‡æ–°åˆ›å»ºç»„ä»¶å®ä¾‹ï¼Œå› ä¸ºremoteå‚æ•°åœ¨æ„é€ å‡½æ•°ä¸­è®¾ç½®
      const currentValue = autocomplete.getValue();
      const container = document.getElementById('autocomplete-container');
      
      // é”€æ¯å½“å‰å®ä¾‹
      autocomplete.destroy();
      
      // é‡æ–°åˆ›å»ºå®ä¾‹ï¼Œåˆ‡æ¢remoteæ¨¡å¼
      const newAutocomplete = googleAutoComplete(container, {
        apiKey: 'AIzaSyCN3Gpqy5zwW9jB6Nuz5Ozsk0nnl6R57Kk',
        placeholder: 'Enter any location...',
        remote: !autocomplete.options.remote, // åˆ‡æ¢remoteæ¨¡å¼
        remoteUrl: 'http://localhost:3000/places/',
        inputClass: 'custom-input',
        inputStyle: {
          'font-weight': '500',
          'letter-spacing': '0.5px'
        },
        resultsClass: 'custom-results',
        resultsStyle: {
          'z-index': '9999',
          'max-height': '350px'
        },
        wrapperClass: 'custom-wrapper',
        onSelect: function (place) {
          document.getElementById('output').textContent = `Selected: ${place.formattedAddress || place.displayName || place.query}`;
          console.log('Full place object:', place);
        },
        onInput: function (value) {
          console.log('onInput', value);
          if (value.length > 2) {
            document.getElementById('output').textContent = `Typing: "${value}"`;
          } else if (value.length === 0) {
            document.getElementById('output').textContent = 'Ready... (Enter a location to see autocomplete suggestions)';
          }
        },
        onFocus: function () {
          console.log('Input focused');
        },
        onBlur: function () {
          console.log('Input blurred');
        }
      });
      
      // æ¢å¤è¾“å…¥å€¼
      if (currentValue) {
        newAutocomplete.setValue(currentValue);
      }
      
      // æ›´æ–°å…¨å±€å˜é‡
      window.autocomplete = newAutocomplete;
      
      const mode = newAutocomplete.options.remote ? 'è¿œç¨‹æœåŠ¡æ¨¡å¼' : 'Google Maps APIæ¨¡å¼';
      document.getElementById('output').textContent = `ğŸ”„ å·²åˆ‡æ¢åˆ°${mode}`;
    }

    // æµ‹è¯•å‡½æ•°ï¼šæ˜¾ç¤ºå½“å‰æ¨¡å¼
    function showCurrentMode() {
      const mode = autocomplete.options.remote ? 'è¿œç¨‹æœåŠ¡æ¨¡å¼' : 'Google Maps APIæ¨¡å¼';
      const url = autocomplete.options.remote ? autocomplete.options.remoteUrl : 'Google Maps API';
      document.getElementById('output').textContent = `ğŸ“¡ å½“å‰æ¨¡å¼: ${mode}\næœåŠ¡åœ°å€: ${url}`;
    }
  </script>
</body>

</html>